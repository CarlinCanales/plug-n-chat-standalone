(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function a(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=a(t);fetch(t.href,r)}})();const p="chatify",u=void 0,i={};function n(e){return`${p}-${e}`}function h(e){const s=document.createElement("div");return s.classList.add(n("shell-wrapper")),s.append(e),s}function m(e,s){const a=document.createElement("iframe");a.setAttribute("data-chatify",""),a.classList.add(n("single-chat")),a.setAttribute("src",`${u}/chat?userId=${e}&friendId=${s}`);const o=h(a);return o.classList.add("open"),i[s]=o,o}function g(e){i[e].remove(),delete i[e]}const d=document.createElement("div");d.classList.add(n("shell"));const c=document.createElement("iframe");c.classList.add(n("dashboard"));c.setAttribute("data-chatify","");const f=window.sessionStorage.getItem("userId");if(f)c.setAttribute("src",`${u}/dashboard?userId=${f}`);else{const e=Math.random().toString().substring(2);window.sessionStorage.setItem("userId",e),c.setAttribute("src",`${u}/dashboard?userId=${e}`)}d.appendChild(h(c));window.addEventListener("message",e=>{var s,a;if(e.data.source==="chatify")switch(e.data.message){case"toggle dashboard":(s=c.closest(`.${n("shell-wrapper")}`))==null||s.classList.toggle("open");break;case"toggle chat":(a=i[e.data.id].closest(`.${n("shell-wrapper")}`))==null||a.classList.toggle("open");break;case"close chat":g(e.data.id);break;case"create new single chat":const{uid:o,fid:t}=e.data;i[t]||d.appendChild(m(o,t));break}});document.body.appendChild(d);
